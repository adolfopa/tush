#!/bin/sh
# Copyright 2007 Darius Bacon under the MIT X license.

# usage: tush-run [tush-script...]

# For test isolation, commands are run in a fresh scratch subdirectory
# of the current directory.
scratch=$(mktemp -d tush-scratch.XXXXX)

cleanup()
{
    rm -rf $scratch
}

trap cleanup EXIT SIGHUP SIGKILL SIGTERM

cat "$@" | (cd $scratch; tush-run-raw)
